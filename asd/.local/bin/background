#!/usr/bin/env sh

DIR=~/Pictures/Wallpapers
SLEEP=30

[ "$(pgrep --uid "$USER" --full "sh $0" | wc --lines)" -ne 2 ] \
  && pkill --uid "$USER" --full "sh $0" --oldest
[ "$1" = 'kill' ] && exit
xwallpaper --center "$(shuf -n 1 -e ${DIR}/*)"
sleep "$SLEEP" && exec "$0"
